/**
 * Mimic Mongo Sdk built constructor
 */

module.exports = function (req, res, next) {
	req.built = new Built()
	req.built.setContextVar('currentUser', req.payload.current_user)
	next()
}

function Built(){
	this.context = {}
}

Built.prototype.setContextVar = function(key, value){
  this.context[key] = value
  return this
}

Built.prototype.getContextVar = function(key){
  return this.context[key]
}