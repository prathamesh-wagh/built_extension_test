var Built = require('built.io')
var base = require('../controller/base')
/**
 * This middleware wraps the the request body into js sdk wrappers
 */

module.exports = function (req, res, next) {
	var configs  = this.app.getConfig()
	if(req.url.indexOf("/api") === 0 && req.headers.application_api_key !== configs.application_api_key){
		return base.resError(req, res, {
			"application_api_key": "did not match. Please ensure the extension is point to right Built.io Backend application"
		})
	}
	next()
}