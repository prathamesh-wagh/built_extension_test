
// Response wrapper
var resSuccess = module.exports.resSuccess = function (req, res, data) {
	res.status(200)
	res.send({
		isExtensionResponse : true,
		data                : data
	})
}

module.exports.resError = function(req, res, error, statusCode){
	// construct the error message
	module.exports.resSuccess = resSuccess.bind(this)
	res.status(statusCode || 422).send({
		isExtensionError : true,
		errors           : bridgeErrorFormat(error)
	})
}

function bridgeErrorFormat(error){
	return Object.keys(error)
	.map(function(errorKey){
		return {
			errorKey : error[errorKey],
			path     : errorKey
		}
	})
}